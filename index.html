<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»Šå¤©åƒä»€ä¹ˆï¼Ÿ - Beybeyå®šåˆ¶ç‰ˆ</title>
    <style>
        /* === å…¨å±€æ ·å¼ === */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%); /* ç¨å¾®æš–ä¸€ç‚¹çš„è‰²è°ƒé…åˆèƒ¡èåœ */
        }

        /* === 1. åŠ¨æ€èƒŒæ™¯ === */
        #bg-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
            opacity: 0.3;
        }

        .art-text {
            position: absolute;
            white-space: nowrap;
            user-select: none;
            font-weight: bold;
            filter: blur(1px);
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }

        /* === 2. ä¸»ç•Œé¢ === */
        .container {
            position: relative;
            z-index: 10;
            display: none; /* åˆå§‹éšè—ï¼Œé€‰å®ŒåŒºåŸŸå†æ˜¾ç¤º */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
        }

        h1 {
            font-size: 2.5rem;
            color: #333;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 10px 40px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        /* è½¬ç›˜å®¹å™¨ */
        .wheel-wrapper {
            position: relative;
            width: 500px;
            height: 500px;
            border-radius: 50%;
            box-shadow: 0 0 25px rgba(0,0,0,0.2);
            border: 12px solid #fff;
            background: #fff;
        }

        #wheelCanvas {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            transition: transform 4s cubic-bezier(0.25, 0.1, 0.25, 1);
        }

        .pointer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: #ff6b6b;
            border-radius: 50%;
            border: 4px solid #fff;
            z-index: 20;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-weight: bold;
            font-size: 16px;
        }

        .pointer::before {
            content: '';
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 0 15px 30px 15px;
            border-style: solid;
            border-color: transparent transparent #ff6b6b transparent;
        }

        /* === 3. å¼¹çª—é€šç”¨æ ·å¼ (å¼€å±€é€‰æ‹© & ç»“æœ) === */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-box {
            background: #fff;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            max-width: 90%;
            width: 400px;
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* å¼€å±€é€‰æ‹©æ¡†æ ·å¼ */
        select.region-select {
            width: 100%;
            padding: 12px;
            font-size: 1.2rem;
            margin: 20px 0;
            border-radius: 10px;
            border: 2px solid #ddd;
            outline: none;
            transition: border-color 0.3s;
        }
        select.region-select:focus {
            border-color: #ff9f43;
        }

        button.primary-btn {
            background: linear-gradient(to right, #ff9f43, #ff6b6b);
            color: white;
            border: none;
            padding: 12px 40px;
            font-size: 1.2rem;
            border-radius: 30px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }
        button.primary-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.6);
        }

        /* ç»“æœæ–‡å­— */
        .winner-text {
            font-size: 2.5rem;
            color: #ff6b6b;
            font-weight: bold;
            margin: 20px 0;
            line-height: 1.2;
        }

        /* === 4. åº•éƒ¨ç½²å + èƒ¡èåœ === */
        .footer {
            position: fixed;
            bottom: 15px;
            right: 20px;
            z-index: 50;
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.7);
            padding: 8px 15px;
            border-radius: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9rem;
            color: #555;
            font-weight: bold;
        }
        
        .carrot-icon {
            width: 24px;
            height: 24px;
            margin-left: 8px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* é€‚é…æ‰‹æœº */
        @media (max-width: 600px) {
            .wheel-wrapper {
                width: 320px;
                height: 320px;
            }
            h1 { font-size: 1.8rem; }
            .modal-box { width: 85%; padding: 30px 20px; }
            .footer { bottom: 10px; right: 50%; transform: translateX(50%); width: auto; white-space: nowrap; }
        }
    </style>
</head>
<body>

    <!-- èƒŒæ™¯å±‚ -->
    <div id="bg-container"></div>

    <!-- 1. å¼€å±€é€‰æ‹©å¼¹çª— -->
    <div class="modal-overlay" id="startModal">
        <div class="modal-box">
            <h2 style="color: #333;">ğŸ‘‹ å˜¿ï¼Œä»Šå¤©åœ¨å“ªåƒï¼Ÿ</h2>
            <p style="color: #666;">è¯·å…ˆé€‰æ‹©ä¸€ä¸ªåŒºåŸŸ</p>
            
            <select id="regionSelect" class="region-select">
                <option value="ç¿”æ‘ä¸œé—¨">ç¿”æ‘ä¸œé—¨</option>
                <option value="å¦é—¨å²›å¤–">å¦é—¨å²›å¤–</option>
                <option value="å¦é—¨å²›å†…">å¦é—¨å²›å†…</option>
            </select>

            <button class="primary-btn" onclick="initGame()">ç¡®è®¤å¹¶å¼€å§‹</button>
        </div>
    </div>

    <!-- 2. ä¸»æ¸¸æˆç•Œé¢ -->
    <div class="container" id="gameContainer">
        <h1 id="mainTitle">ä»Šå¤©åƒä»€ä¹ˆï¼Ÿ</h1>
        <div class="wheel-wrapper">
            <canvas id="wheelCanvas" width="1000" height="1000"></canvas>
            <div class="pointer" onclick="startSpin()">GO</div>
        </div>
    </div>

    <!-- 3. ç»“æœå¼¹çª— -->
    <div class="modal-overlay" id="resultModal" style="display: none;">
        <div class="modal-box">
            <h2 style="color: #333;">ğŸ¥• å‘½ä¸­æ³¨å®š ğŸ¥•</h2>
            <div class="winner-text" id="winnerText"></div>
            <button class="primary-btn" onclick="closeResult()">è¿™å°±å»åƒï¼</button>
        </div>
    </div>

    <!-- 4. åº•éƒ¨å¼€å‘äººç½²å -->
    <div class="footer">
        å¼€å‘äººï¼šBeybey
        <!-- èƒ¡èåœ SVG -->
        <svg class="carrot-icon" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
            <path d="M16 42 C16 42 8 20 26 8 C26 8 40 2 46 12 C46 12 54 26 48 42 C42 58 32 62 32 62 C32 62 22 58 16 42 Z" fill="#FF9F43"/>
            <path d="M18 38 Q 28 45 38 36" stroke="#F38C2B" stroke-width="3" fill="none" stroke-linecap="round"/>
            <path d="M22 28 Q 30 34 38 26" stroke="#F38C2B" stroke-width="3" fill="none" stroke-linecap="round"/>
            <path d="M28 18 Q 34 22 40 16" stroke="#F38C2B" stroke-width="3" fill="none" stroke-linecap="round"/>
            <path d="M36 8 L 36 2 M 38 9 L 44 3 M 34 9 L 28 3" stroke="#2ECC71" stroke-width="4" stroke-linecap="round"/>
        </svg>
    </div>

    <script>
        // ================= æ•°æ®é…ç½® =================
        
        // åŸºç¡€å²›å†…åå• (35ä¸ª)
        const list_island_base = [
            "å»¶è¾¹åŒé—¨æ´Â·ç‚­ç«çƒ¤è‚‰", "ç¾”ç¾Šåœ°å¸¦", "ç›Ÿé‡çƒ§çƒ¤", "éœ¸è…¹çƒ¤è‚‰", "èå§ç«é”…", 
            "è€é—¨æ¡†å››å­£çˆ†è‚šæ¶®è‚‰", "å´ç¾ä¸½è´µå·é…¸æ±¤ç«é”…", "å…«åˆé‡Œæ½®æ±•ç‰›è‚‰ç«é”…", "202ç‰¹è‰²æ’æŒ¡", "é—½å’Œå—",
            "å°åŸ•æˆÂ·æµæ°´å¸­", "å¥½å£å‘³ç…èŸ¹é¦†", "é’Ÿæ„ç‰›æ‰’", "Ay Manuelaè¥¿ç­ç‰™é¤å…", "é™é¦™House",
            "æ¬§ç™»åå¾·å›½é¤å…", "HZ pizza", "Paradisoçª‘çƒ¤æŠ«è¨", "THAI1949è¥¿æ³°æ–™ç†", "Home Thaiæ³°è°£",
            "éŸ©æ­£è‹‘", "æŸÂ·å±…é…’å±‹", "ç”ºç¦¾", "ä¸Šè†³", "èƒ–è¾¾çš„å·èœé¦†",
            "é»„é¹¤å¤©å¨ï¼ˆè²èŠ±åº—ï¼‰", "å‚²å®¢å¤œå¨", "ä¹ä»™æ¹–ç±³ç²‰å°ç‚’", "æ½®ç¦åŸ", "å¯Œæ‚¦è½©",
            "æ³°è’²", "æœ±å¯Œè´µ", "ç‹å‘†å‘†", "è€æ¹˜äº²", "å‡¯å®¾æ–¯åŸºè‡ªåŠ©"
        ];

        // å²›å†…æ–°å¢ (4ä¸ª)
        const list_island_add = ["å¹»å¸ˆ", "ç‹å®å™¨æ´ªæ–‡åº—", "å‘³ä¹‹ç»", "ä¸‡è¾¾å¾¡å—é—¨"];

        // å®Œæ•´çš„å²›å†…åå• (åˆå¹¶)
        const list_island_final = list_island_base.concat(list_island_add);

        // ç¿”æ‘ä¸œé—¨åå•
        const list_xiangcun = [
            "ä¼˜é¢æœ‰èŒƒ", "å…°å·æ‹‰é¢", "handin", "å¡”æ–¯æ±€", "å¤©ä¹æ¹¾", "é¸¡å…¬ç…²", "é”…ç™¾äº¿", 
            "è´µå·æ°´åŸç¾Šè‚‰ç²‰", "ç‰›éª¨ç²‰", "é‡Œè„Šè‚‰é¥¼", "æ±Ÿè¥¿ç‚’ç²‰", "ä¸€ç²’ç±³", "è€é‡åº†å°é¢", 
            "æ²³å—çƒ©é¢", "ç«ä¸°é£Ÿå ‚ä¸€æ¥¼", "ç«ä¸°é£Ÿå ‚äºŒæ¥¼", "ç«ä¸°é£Ÿå ‚ä¸‰æ¥¼", "å®æ˜è‡»æ°´é¥º", 
            "ä¸€å®¶äººä¸œåŒ—èœ", "æ±Ÿè¥¿å°ç‚’", "æ³°å¼å˜æŠ›é¥­", "çƒ¤è‚‰æ‹Œé¥­", "ç¾é£Ÿè¡—é‡åº†å°é¢"
        ];

        // å¦é—¨å²›å¤–åå•
        const list_outside = [
            "äºŒé¾™æ’¸ä¸²", "è®¸ä¿æœ¬çƒ§çƒ¤è‡ªåŠ©", "å‰æ‹¾ä¸²", "èå§ç«é”…", "å¤©å¤©æ½®æ±•ç‰›è‚‰ç«é”…", 
            "æ±•å¤´ç‰›åŸºåœ°é²œç‰›è‚‰ç«é”…", "æµ·åº•æ", "æ¬¢å¤•Â·ç¿”å®‰åºœ", "åŠè˜", "ä¸´å®¶é—½å—èœ", 
            "å¤§åå®…", "å…­å’Œå±…", "é’¦èœ", "é¦–å°”å±±åº„", "é«˜ä¸½æ´›", "éŸ©åº­", "é˜¿å–„å¸ˆç¾Šè‚‰ç‚‰", 
            "æ‹æ‹æ²™èŒ¶é¢", "ä¸­å±±ç‰›è‚‰åº—", "Gudisè°·åœ°ç²¾é…¿", "è¾¾ç¾ä¹"
        ];

        // æ•°æ®å­—å…¸
        const DATA_MAP = {
            "ç¿”æ‘ä¸œé—¨": list_xiangcun,
            "å¦é—¨å²›å¤–": list_outside,
            "å¦é—¨å²›å†…": list_island_final
        };

        // å½“å‰ä½¿ç”¨çš„åå•
        let currentList = [];

        // é¢œè‰²é…ç½®
        const colors = ['#FF6B6B', '#FFD93D', '#6BCB77', '#4D96FF', '#F78FB3', '#CF6A87', '#546DE5', '#E15F41'];

        // å…¨å±€å˜é‡
        const canvas = document.getElementById('wheelCanvas');
        const ctx = canvas.getContext('2d');
        let arc = 0;
        let currentRotation = 0;
        let isSpinning = false;

        // ================= åˆå§‹åŒ–é€»è¾‘ =================

        // ç‚¹å‡»â€œç¡®è®¤å¹¶å¼€å§‹â€
        function initGame() {
            const select = document.getElementById('regionSelect');
            const region = select.value;
            
            // 1. è®¾ç½®å½“å‰åå•
            currentList = DATA_MAP[region];
            
            // 2. éšè—é€‰æ‹©å¼¹çª—ï¼Œæ˜¾ç¤ºæ¸¸æˆç•Œé¢
            document.getElementById('startModal').style.display = 'none';
            document.getElementById('gameContainer').style.display = 'flex';

            // 3. æ›´æ–°æ ‡é¢˜ï¼ˆå¯é€‰ï¼Œå¦‚æœæƒ³è®©æ ‡é¢˜ä¹Ÿå˜çš„è¯ï¼‰
            // document.getElementById('mainTitle').innerText = region + " åƒä»€ä¹ˆï¼Ÿ";

            // 4. åˆå§‹åŒ–è½¬ç›˜
            arc = 2 * Math.PI / currentList.length;
            drawWheel();

            // 5. åˆå§‹åŒ–èƒŒæ™¯ï¼ˆä½¿ç”¨å½“å‰åå•çš„è¯æ±‡ï¼‰
            createBackground();
        }

        // ================= ç»˜å›¾é€»è¾‘ =================

        function drawWheel() {
            const num = currentList.length;
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = canvas.width / 2;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            for (let i = 0; i < num; i++) {
                const angle = i * arc;
                
                // ç»˜åˆ¶æ‰‡å½¢
                ctx.beginPath();
                ctx.fillStyle = colors[i % colors.length];
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, angle, angle + arc);
                ctx.lineTo(centerX, centerY);
                ctx.fill();

                // ç»˜åˆ¶æ–‡å­—
                ctx.save();
                ctx.translate(centerX, centerY);
                ctx.rotate(angle + arc / 2);
                ctx.textAlign = "right";
                ctx.fillStyle = "#fff";
                ctx.font = "bold 24px Microsoft YaHei";
                
                // æ–‡å­—æ™ºèƒ½æˆªæ–­
                let text = currentList[i];
                // æ ¹æ®åå•é•¿åº¦åŠ¨æ€è°ƒæ•´æˆªæ–­ï¼Œåå•ç‹¬è¶Šé•¿ï¼Œæ‰‡å½¢è¶Šçª„ï¼Œå­—è¶Šè¦å°‘
                let limit = num > 30 ? 6 : 9; 
                if (text.length > limit) {
                    text = text.substring(0, limit) + "..";
                }
                
                ctxã€‚fillText(textï¼Œ radius - 40, 10);
                ctxã€‚restore();
            }
        }

        // ================= äº¤äº’é€»è¾‘ =================

        function startSpin() {
            if (isSpinning) return;
            isSpinning = true;

            const randomSpins = Math.floor(Math.random() * 5) + 5; // 5-10åœˆ
            const randomDegree = Mathã€‚floor(Mathã€‚random() * 360);
            
            const targetRotation = currentRotation + (randomSpins * 360) + randomDegree;
            
            canvasã€‚styleã€‚transform = `rotate(${targetRotation}deg)`;
            currentRotation = targetRotation;

            setTimeout(() => {
                isSpinning = false;
                showResult(targetRotation);
            }ï¼Œ 4000);
        }

        function showResult(rotation) {
            const num = currentListã€‚length;
            const actualRotation = rotation % 360;
            let degrees = 360 - actualRotation + 90; 
            if (degrees >= 360) degrees -= 360;
            
            const index = Math.floor(degrees / (360 / num));
            const winner = currentList[index];
            
            documentã€‚getElementById('winnerText')ã€‚innerText = winner;
            documentã€‚getElementById('resultModal')ã€‚styleã€‚display = 'flex';
        }

        function closeResult() {
            documentã€‚getElementById('resultModal')ã€‚styleã€‚display = 'none';
        }

        // ================= èƒŒæ™¯ç”Ÿæˆ =================
        
        function createBackground() {
            const container = document.getElementById('bg-container');
            containerã€‚innerHTML = ''; // æ¸…ç©ºå¯èƒ½å­˜åœ¨çš„æ—§èƒŒæ™¯
            const width = windowã€‚innerWidth;
            const height = window.innerHeight;

            for (let i = 0; i < 40; i++) {
                const span = documentã€‚createElement('span');
                spanã€‚classListã€‚add('art-text');
                spanã€‚innerText = currentList[Mathã€‚floor(Mathã€‚random() * currentList.length)];
                
                const size = Mathã€‚floor(Mathã€‚random() * 25) + 14; 
                const left = Mathã€‚floor(Mathã€‚random() * width);
                const top = Mathã€‚floor(Mathã€‚random() * height);
                const rot = Mathã€‚floor(Mathã€‚random() * 90) - 45;
                const color = colors[Mathã€‚floor(Mathã€‚random() * colors.length)];

                spanã€‚styleã€‚fontSize = size + 'px';
                spanã€‚styleã€‚left = left + 'px';
                spanã€‚styleã€‚top = top + 'px';
                spanã€‚styleã€‚transform = `rotate(${rot}deg)`;
                spanã€‚styleã€‚color = color;
                
                spanã€‚styleã€‚animationDuration = (Mathã€‚random() * 10 + 15) + 's';
                spanã€‚styleã€‚animationDelay = (Mathã€‚random() * 5) + 's';

                containerã€‚appendChild(span);
            }
        }
    </script>
</body>
</html>
